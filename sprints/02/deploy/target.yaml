type: static_hosting
platform: vercel

build:
  command: "npm ci && npm run build"
  artifacts:
    - "dist"
  node_version: "18"

serve:
  command: "npm run preview"
  base_url: "http://localhost:4173"
  wait_on: "http://localhost:4173"
  wait_timeout: 30000

smoke:
  - path: "/"
    expect_status: 200
    description: "Home page loads successfully"

  - path: "/dashboard"
    expect_status: 200
    description: "Dashboard page loads"

  - path: "/parking-spaces"
    expect_status: 200
    description: "Parking Spaces page loads"

  - path: "/areas"
    expect_status: 200
    description: "Areas page loads"

health_check:
  endpoint: "/"
  interval_seconds: 30
  timeout_seconds: 5
  healthy_threshold: 2
  unhealthy_threshold: 3

iac:
  tool: "terraform"
  dir: "sprints/02/infra/terraform"
  plan_out: "sprints/02/infra/terraform/plan.out"
  commands:
    init: "terraform init"
    validate: "terraform validate"
    plan: "terraform plan -out=plan.out"

environment_variables:
  - key: "VITE_MOCK_SCENARIO"
    value: "normal"
    description: "Mock data scenario (normal|empty|error)"
